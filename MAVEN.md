example configuration adding profile **run-test-server**. run maven lifecycle **verify** with profile **run-test-server** to start a local test server.

![idea maven integration](https://i.imgur.com/KHzaxWX.png)

```xml
<!-- ... -->
<properties>
    <minecraft.version>1.16.5</minecraft.version>
</properties>
        <!-- ... -->
<profiles>
<profile>
    <id>run-test-server</id>
    <properties>
        <build.profile.id>run-test-server</build.profile.id>
        <skip.integration.tests>false</skip.integration.tests>
        <skip.unit.tests>false</skip.unit.tests>
    </properties>
    <build>
        <defaultGoal>verify</defaultGoal>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-clean-plugin</artifactId>
                <version>3.1.0</version>
                <configuration>
                    <filesets>
                        <fileset>
                            <directory>server</directory>
                            <followSymlinks>false</followSymlinks>
                        </fileset>
                    </filesets>
                </configuration>
            </plugin>
            <!-- dont actually do this, use a git submodule instead
            <plugin>
                <groupId>com.googlecode.maven-download-plugin</groupId>
                <artifactId>download-maven-plugin</artifactId>
                <version>1.3.0</version>
                <executions>
                    <execution>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>wget</goal>
                        </goals>
                        <configuration>
                            <url>https://raw.githubusercontent.com/nothub/convenience/master/server-setup.py</url>
                            <outputFileName>server-setup.py</outputFileName>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
             -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>3.0.0</version>
                <executions>
                    <execution>
                        <id>chmod</id>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>chmod</executable>
                            <arguments>
                                <argument>+x</argument>
                                <argument>${project.build.directory}/server-setup.py</argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>mc-server-setup</id>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>${project.build.directory}/server-setup.py</executable>
                            <arguments>
                                <argument>--mc-version</argument>
                                <argument>${minecraft.version}</argument>
                                <argument>--copy-plugins</argument>
                                <argument>target/${project.artifactId}-*.jar</argument>
                            </arguments>
                            <environmentVariables>
                                <!-- Set MC_EULA to agree with Mojangs EULA: https://account.mojang.com/documents/minecraft_eula
                                <MC_EULA>true</MC_EULA> -->
                            </environmentVariables>
                        </configuration>
                    </execution>
                    <execution>
                        <id>mc-server-run</id>
                        <phase>integration-test</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <workingDirectory>server</workingDirectory>
                            <executable>java</executable>
                            <arguments>
                                <argument>-jar</argument>
                                <argument>server.jar</argument>
                                <argument>nogui</argument>
                            </arguments>
                        </configuration>
                    </execution>
                </executions>
                <configuration>
                    <environmentVariables>
                        <LANG>en_US</LANG>
                    </environmentVariables>
                </configuration>
            </plugin>
        </plugins>
    </build>
</profile>
</profiles>
        <!-- ... -->
```
